var mod_pagespeed_a8hDjzT3l_ = ";(function($){var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(e==null)return;var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=?)?\\d+(\\.\\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,e,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);";
var mod_pagespeed_1nA1vKz9z4 = "(function(a){a.extend(a.fn,{livequery:function(e,d,c){var b=this,f;if(a.isFunction(e)){c=d,d=e,e=undefined}a.each(a.livequery.queries,function(g,h){if(b.selector==h.selector&&b.context==h.context&&e==h.type&&(!d||d.$lqguid==h.fn.$lqguid)&&(!c||c.$lqguid==h.fn2.$lqguid)){return(f=h)&&false}});f=f||new a.livequery(this.selector,this.context,e,d,c);f.stopped=false;f.run();return this},expire:function(e,d,c){var b=this;if(a.isFunction(e)){c=d,d=e,e=undefined}a.each(a.livequery.queries,function(f,g){if(b.selector==g.selector&&b.context==g.context&&(!e||e==g.type)&&(!d||d.$lqguid==g.fn.$lqguid)&&(!c||c.$lqguid==g.fn2.$lqguid)&&!this.stopped){a.livequery.stop(g.id)}});return this}});a.livequery=function(b,d,f,e,c){this.selector=b;this.context=d;this.type=f;this.fn=e;this.fn2=c;this.elements=[];this.stopped=false;this.id=a.livequery.queries.push(this)-1;e.$lqguid=e.$lqguid||a.livequery.guid++;if(c){c.$lqguid=c.$lqguid||a.livequery.guid++}return this};a.livequery.prototype={stop:function(){var b=this;if(this.type){this.elements.unbind(this.type,this.fn)}else{if(this.fn2){this.elements.each(function(c,d){b.fn2.apply(d)})}}this.elements=[];this.stopped=true},run:function(){if(this.stopped){return}var d=this;var e=this.elements,c=a(this.selector,this.context),b=c.not(e);this.elements=c;if(this.type){b.bind(this.type,this.fn);if(e.length>0){a.each(e,function(f,g){if(a.inArray(g,c)<0){a.event.remove(g,d.type,d.fn)}})}}else{b.each(function(){d.fn.apply(this)});if(this.fn2&&e.length>0){a.each(e,function(f,g){if(a.inArray(g,c)<0){d.fn2.apply(g)}})}}}};a.extend(a.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length){var b=a.livequery.queue.length;while(b--){a.livequery.queries[a.livequery.queue.shift()].run()}}},pause:function(){a.livequery.running=false},play:function(){a.livequery.running=true;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(c,d){if(!a.fn[d]){return}var b=a.fn[d];a.fn[d]=function(){var e=b.apply(this,arguments);a.livequery.run();return e}})},run:function(b){if(b!=undefined){if(a.inArray(b,a.livequery.queue)<0){a.livequery.queue.push(b)}}else{a.each(a.livequery.queries,function(c){if(a.inArray(c,a.livequery.queue)<0){a.livequery.queue.push(c)}})}if(a.livequery.timeout){clearTimeout(a.livequery.timeout)}a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(b){if(b!=undefined){a.livequery.queries[b].stop()}else{a.each(a.livequery.queries,function(c){a.livequery.queries[c].stop()})}}});a.livequery.registerPlugin(\"append\",\"prepend\",\"after\",\"before\",\"wrap\",\"attr\",\"removeAttr\",\"addClass\",\"removeClass\",\"toggleClass\",\"empty\",\"remove\",\"html\");a(function(){a.livequery.play()})})(jQuery);";
var mod_pagespeed_AKC4FLip6q = "(function($,undefined){'use strict';if($.rails!==undefined){$.error('jquery-ujs has already been loaded!');}var rails;var $document=$(document);$.rails=rails={linkClickSelector:'a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]',buttonClickSelector:'button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)',inputChangeSelector:'select[data-remote], input[data-remote], textarea[data-remote]',formSubmitSelector:'form',formInputClickSelector:'form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])',disableSelector:'input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled',enableSelector:'input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled',requiredInputSelector:'input[name][required]:not([disabled]), textarea[name][required]:not([disabled])',fileInputSelector:'input[type=file]:not([disabled])',linkDisableSelector:'a[data-disable-with], a[data-disable]',buttonDisableSelector:'button[data-remote][data-disable-with], button[data-remote][data-disable]',csrfToken:function(){return $('meta[name=csrf-token]').attr('content');},csrfParam:function(){return $('meta[name=csrf-param]').attr('content');},CSRFProtection:function(xhr){var token=rails.csrfToken();if(token)xhr.setRequestHeader('X-CSRF-Token',token);},refreshCSRFTokens:function(){$('form input[name=\"'+rails.csrfParam()+'\"]').val(rails.csrfToken());},fire:function(obj,name,data){var event=$.Event(name);obj.trigger(event,data);return event.result!==false;},confirm:function(message){return confirm(message);},ajax:function(options){return $.ajax(options);},href:function(element){return element[0].href;},isRemote:function(element){return element.data('remote')!==undefined&&element.data('remote')!==false;},handleRemote:function(element){var method,url,data,withCredentials,dataType,options;if(rails.fire(element,'ajax:before')){withCredentials=element.data('with-credentials')||null;dataType=element.data('type')||($.ajaxSettings&&$.ajaxSettings.dataType);if(element.is('form')){method=element.data('ujs:submit-button-formmethod')||element.attr('method');url=element.data('ujs:submit-button-formaction')||element.attr('action');data=$(element[0].elements).serializeArray();var button=element.data('ujs:submit-button');if(button){data.push(button);element.data('ujs:submit-button',null);}element.data('ujs:submit-button-formmethod',null);element.data('ujs:submit-button-formaction',null);}else if(element.is(rails.inputChangeSelector)){method=element.data('method');url=element.data('url');data=element.serialize();if(element.data('params'))data=data+'&'+element.data('params');}else if(element.is(rails.buttonClickSelector)){method=element.data('method')||'get';url=element.data('url');data=element.serialize();if(element.data('params'))data=data+'&'+element.data('params');}else{method=element.data('method');url=rails.href(element);data=element.data('params')||null;}options={type:method||'GET',data:data,dataType:dataType,beforeSend:function(xhr,settings){if(settings.dataType===undefined){xhr.setRequestHeader('accept','*/*;q=0.5, '+settings.accepts.script);}if(rails.fire(element,'ajax:beforeSend',[xhr,settings])){element.trigger('ajax:send',xhr);}else{return false;}},success:function(data,status,xhr){element.trigger('ajax:success',[data,status,xhr]);},complete:function(xhr,status){element.trigger('ajax:complete',[xhr,status]);},error:function(xhr,status,error){element.trigger('ajax:error',[xhr,status,error]);},crossDomain:rails.isCrossDomain(url)};if(withCredentials){options.xhrFields={withCredentials:withCredentials};}if(url){options.url=url;}return rails.ajax(options);}else{return false;}},isCrossDomain:function(url){var originAnchor=document.createElement('a');originAnchor.href=location.href;var urlAnchor=document.createElement('a');try{urlAnchor.href=url;urlAnchor.href=urlAnchor.href;return!(((!urlAnchor.protocol||urlAnchor.protocol===':')&&!urlAnchor.host)||(originAnchor.protocol+'//'+originAnchor.host===urlAnchor.protocol+'//'+urlAnchor.host));}catch(e){return true;}},handleMethod:function(link){var href=rails.href(link),method=link.data('method'),target=link.attr('target'),csrfToken=rails.csrfToken(),csrfParam=rails.csrfParam(),form=$('<form method=\"post\" action=\"'+href+'\"></form>'),metadataInput='<input name=\"_method\" value=\"'+method+'\" type=\"hidden\" />';if(csrfParam!==undefined&&csrfToken!==undefined&&!rails.isCrossDomain(href)){metadataInput+='<input name=\"'+csrfParam+'\" value=\"'+csrfToken+'\" type=\"hidden\" />';}if(target){form.attr('target',target);}form.hide().append(metadataInput).appendTo('body');form.submit();},formElements:function(form,selector){return form.is('form')?$(form[0].elements).filter(selector):form.find(selector);},disableFormElements:function(form){rails.formElements(form,rails.disableSelector).each(function(){rails.disableFormElement($(this));});},disableFormElement:function(element){var method,replacement;method=element.is('button')?'html':'val';replacement=element.data('disable-with');if(replacement!==undefined){element.data('ujs:enable-with',element[method]());element[method](replacement);}element.prop('disabled',true);element.data('ujs:disabled',true);},enableFormElements:function(form){rails.formElements(form,rails.enableSelector).each(function(){rails.enableFormElement($(this));});},enableFormElement:function(element){var method=element.is('button')?'html':'val';if(element.data('ujs:enable-with')!==undefined){element[method](element.data('ujs:enable-with'));element.removeData('ujs:enable-with');}element.prop('disabled',false);element.removeData('ujs:disabled');},allowAction:function(element){var message=element.data('confirm'),answer=false,callback;if(!message){return true;}if(rails.fire(element,'confirm')){try{answer=rails.confirm(message);}catch(e){(console.error||console.log).call(console,e.stack||e);}callback=rails.fire(element,'confirm:complete',[answer]);}return answer&&callback;},blankInputs:function(form,specifiedSelector,nonBlank){var inputs=$(),input,valueToCheck,selector=specifiedSelector||'input,textarea',allInputs=form.find(selector);allInputs.each(function(){input=$(this);valueToCheck=input.is('input[type=checkbox],input[type=radio]')?input.is(':checked'):!!input.val();if(valueToCheck===nonBlank){if(input.is('input[type=radio]')&&allInputs.filter('input[type=radio]:checked[name=\"'+input.attr('name')+'\"]').length){return true;}inputs=inputs.add(input);}});return inputs.length?inputs:false;},nonBlankInputs:function(form,specifiedSelector){return rails.blankInputs(form,specifiedSelector,true);},stopEverything:function(e){$(e.target).trigger('ujs:everythingStopped');e.stopImmediatePropagation();return false;},disableElement:function(element){var replacement=element.data('disable-with');if(replacement!==undefined){element.data('ujs:enable-with',element.html());element.html(replacement);}element.bind('click.railsDisable',function(e){return rails.stopEverything(e);});element.data('ujs:disabled',true);},enableElement:function(element){if(element.data('ujs:enable-with')!==undefined){element.html(element.data('ujs:enable-with'));element.removeData('ujs:enable-with');}element.unbind('click.railsDisable');element.removeData('ujs:disabled');}};if(rails.fire($document,'rails:attachBindings')){$.ajaxPrefilter(function(options,originalOptions,xhr){if(!options.crossDomain){rails.CSRFProtection(xhr);}});$(window).on('pageshow.rails',function(){$($.rails.enableSelector).each(function(){var element=$(this);if(element.data('ujs:disabled')){$.rails.enableFormElement(element);}});$($.rails.linkDisableSelector).each(function(){var element=$(this);if(element.data('ujs:disabled')){$.rails.enableElement(element);}});});$document.delegate(rails.linkDisableSelector,'ajax:complete',function(){rails.enableElement($(this));});$document.delegate(rails.buttonDisableSelector,'ajax:complete',function(){rails.enableFormElement($(this));});$document.delegate(rails.linkClickSelector,'click.rails',function(e){var link=$(this),method=link.data('method'),data=link.data('params'),metaClick=e.metaKey||e.ctrlKey;if(!rails.allowAction(link))return rails.stopEverything(e);if(!metaClick&&link.is(rails.linkDisableSelector))rails.disableElement(link);if(rails.isRemote(link)){if(metaClick&&(!method||method==='GET')&&!data){return true;}var handleRemote=rails.handleRemote(link);if(handleRemote===false){rails.enableElement(link);}else{handleRemote.fail(function(){rails.enableElement(link);});}return false;}else if(method){rails.handleMethod(link);return false;}});$document.delegate(rails.buttonClickSelector,'click.rails',function(e){var button=$(this);if(!rails.allowAction(button)||!rails.isRemote(button))return rails.stopEverything(e);if(button.is(rails.buttonDisableSelector))rails.disableFormElement(button);var handleRemote=rails.handleRemote(button);if(handleRemote===false){rails.enableFormElement(button);}else{handleRemote.fail(function(){rails.enableFormElement(button);});}return false;});$document.delegate(rails.inputChangeSelector,'change.rails',function(e){var link=$(this);if(!rails.allowAction(link)||!rails.isRemote(link))return rails.stopEverything(e);rails.handleRemote(link);return false;});$document.delegate(rails.formSubmitSelector,'submit.rails',function(e){var form=$(this),remote=rails.isRemote(form),blankRequiredInputs,nonBlankFileInputs;if(!rails.allowAction(form))return rails.stopEverything(e);if(form.attr('novalidate')===undefined){if(form.data('ujs:formnovalidate-button')===undefined){blankRequiredInputs=rails.blankInputs(form,rails.requiredInputSelector,false);if(blankRequiredInputs&&rails.fire(form,'ajax:aborted:required',[blankRequiredInputs])){return rails.stopEverything(e);}}else{form.data('ujs:formnovalidate-button',undefined);}}if(remote){nonBlankFileInputs=rails.nonBlankInputs(form,rails.fileInputSelector);if(nonBlankFileInputs){setTimeout(function(){rails.disableFormElements(form);},13);var aborted=rails.fire(form,'ajax:aborted:file',[nonBlankFileInputs]);if(!aborted){setTimeout(function(){rails.enableFormElements(form);},13);}return aborted;}rails.handleRemote(form);return false;}else{setTimeout(function(){rails.disableFormElements(form);},13);}});$document.delegate(rails.formInputClickSelector,'click.rails',function(event){var button=$(this);if(!rails.allowAction(button))return rails.stopEverything(event);var name=button.attr('name'),data=name?{name:name,value:button.val()}:null;var form=button.closest('form');if(form.length===0){form=$('#'+button.attr('form'));}form.data('ujs:submit-button',data);form.data('ujs:formnovalidate-button',button.attr('formnovalidate'));form.data('ujs:submit-button-formaction',button.attr('formaction'));form.data('ujs:submit-button-formmethod',button.attr('formmethod'));});$document.delegate(rails.formSubmitSelector,'ajax:send.rails',function(event){if(this===event.target)rails.disableFormElements($(this));});$document.delegate(rails.formSubmitSelector,'ajax:complete.rails',function(event){if(this===event.target)rails.enableFormElements($(this));});$(function(){rails.refreshCSRFTokens();});}})(jQuery);";
var mod_pagespeed_gX7XC77lvT = "$j(document).ready(function(){setupToggled();if($j('#work-form')){hideFormFields();};hideHideMe();showShowMe();handlePopUps();attachCharacterCounters();setupAccordion();setupDropdown();updateCachedTokens();$j('.commas li:last-child').addClass('last');$j('.splash').children('div:nth-of-type(odd)').addClass('odd');$j('.actions').children('.share').removeClass('hidden');$j('#inbox-form, .messages').find('.unreviewed').find('.review').find('a').removeClass('hidden');prepareDeleteLinks();thermometer();$j('body').addClass('javascript');});function get_token_input_options(self){return{searchingText:self.attr('autocomplete_searching_text'),hintText:self.attr('autocomplete_hint_text'),noResultsText:self.attr('autocomplete_no_results_text'),minChars:self.attr('autocomplete_min_chars'),queryParam:\"term\",preventDuplicates:true,tokenLimit:self.attr('autocomplete_token_limit'),liveParams:self.attr('autocomplete_live_params'),makeSortable:self.attr('autocomplete_sortable')};}var input=$j('input.autocomplete');if(input.livequery){jQuery(function($){$('input.autocomplete').livequery(function(){var self=$(this);var token_input_options=get_token_input_options(self);var method;try{method=$.parseJSON(self.attr('autocomplete_method'));}catch(err){method=self.attr('autocomplete_method');}self.tokenInput(method,token_input_options);});});}jQuery(function($){$('.expand').each(function(){list=$($(this).attr('action_target'));if(!list.attr('force_expand')||list.children().size()>25||list.attr('force_contract')){list.hide();$(this).show();}else{$(this).nextAll(\".shuffle\").show();$(this).next(\".contract\").show();}$(this).click(function(event){list=$($(this).attr('action_target'));list.show();$(this).next(\".contract\").show();$(this).nextAll(\".shuffle\").show();$(this).hide();event.preventDefault();});});$('.contract').each(function(){$(this).click(function(event){list=$($(this).attr('action_target'));list.hide();$(this).prev(\".expand\").show();$(this).nextAll(\".shuffle\").hide();$(this).hide();event.preventDefault();});});$('.shuffle').each(function(){$(this).click(function(event){list=$($(this).attr('action_target'));list.children().shuffle();event.preventDefault();});});$('.expand_all').each(function(){target=\".\"+$(this).attr('target_class');$(this).click(function(event){$(this).closest(target).find(\".expand\").click();event.preventDefault();});});$('.contract_all').each(function(){target=\".\"+$(this).attr('target_class');$(this).click(function(event){$(this).closest(target).find(\".contract\").click();event.preventDefault();});});});jQuery(function($){$('.check_all').each(function(){$(this).click(function(event){var filter=$(this).data('checkbox-id-filter');var checkboxes;if(filter){checkboxes=$(this).closest('fieldset').find('input[id*=\"'+filter+'\"][type=\"checkbox\"]');}else{checkboxes=$(this).closest(\"fieldset\").find(':checkbox');if(checkboxes.length==0){checkboxes=$(this).closest(\"fieldset\").next().find(':checkbox');if(checkboxes.length==0){checkboxes=$(this).closest(\"fieldset\").prev().find(':checkbox');}}}checkboxes.prop('checked',true);event.preventDefault();});});$('.check_none').each(function(){$(this).click(function(event){var filter=$(this).data('checkbox-id-filter');var checkboxes;if(filter){checkboxes=$(this).closest('fieldset').find('input[id*=\"'+filter+'\"][type=\"checkbox\"]');}else{checkboxes=$(this).closest(\"fieldset\").find(':checkbox');if(checkboxes.length==0){checkboxes=$(this).closest(\"fieldset\").next().find(':checkbox');if(checkboxes.length==0){checkboxes=$(this).closest(\"fieldset\").prev().find(':checkbox');}}}checkboxes.prop('checked',false);event.preventDefault();});});});function setupToggled(){$j('.toggled').each(function(){var node=$j(this);var open_toggles=$j('.'+node.attr('id')+\"_open\");var close_toggles=$j('.'+node.attr('id')+\"_close\");if(node.hasClass('open')){close_toggles.each(function(){$j(this).show();});open_toggles.each(function(){$j(this).hide();});}else{node.hide();close_toggles.each(function(){$j(this).hide();});open_toggles.each(function(){$j(this).show();});}open_toggles.each(function(){$j(this).click(function(e){if($j(this).attr('href')=='#'){e.preventDefault();}node.show();open_toggles.each(function(){$j(this).hide();});close_toggles.each(function(){$j(this).show();});});});close_toggles.each(function(){$j(this).click(function(e){if($j(this).attr('href')=='#'){e.preventDefault();}node.hide();close_toggles.each(function(){$j(this).hide();});open_toggles.each(function(){$j(this).show();});});});});}function hideHideMe(){$j('.hideme').each(function(){$j(this).hide();});}function showShowMe(){$j('.showme').each(function(){$j(this).show();});}function handlePopUps(){$j(\"a[data_popup]\").click(function(event,element){if(event.stopped)return;window.open($j(element).attr('href'));event.stop();});}function remove_section(link,class_of_section_to_remove){$j(link).siblings(\":input[type=hidden]\").val(\"1\");var section=$j(link).closest(\".\"+class_of_section_to_remove);section.find(\".required input, .required textarea\").each(function(index){var element=eval('validation_for_'+$j(this).attr('id'));element.disable();});section.hide();}function add_section(link,nested_model_name,content){var last_id=parseInt($j(link).parent().siblings('.last_id').last().html());var new_id=last_id+1;var regexp=new RegExp(\"new_\"+nested_model_name,\"g\");content=content.replace(regexp,new_id);content=content.replace('class=\"hidden showme\"','');$j(link).parent().before(content);}function toggleFormField(element_id){var ticky=$j('#'+element_id+'-show');if(ticky.is(':checked')){$j('#'+element_id).removeClass('hidden');}else{$j('#'+element_id).addClass('hidden');if(element_id!='chapters-options'&&element_id!='backdate-options'){$j('#'+element_id).find(':input[type!=\"hidden\"]').each(function(index,d){if($j(d).attr('type')==\"checkbox\"){$j(d).attr('checked',false);}else{$j(d).val('');}});}}if(element_id=='chapters-options'){var item=document.getElementById('work_wip_length');if(item.value==1||item.value=='1'){item.value='?';}else{item.value=1;}}}function hideFormFields(){if($j('#work-form')!=null){var toHide=['#co-authors-options','#front-notes-options','#end-notes-options','#chapters-options','#parent-options','#series-options','#backdate-options','#override_tags-options'];$j.each(toHide,function(index,name){if($j(name)){if(!($j(name+'-show').is(':checked'))){$j(name).addClass('hidden');}}});$j('#work-form').className=$j('#work-form').className;}}function hideField(id){$j('#'+id).toggle();}function attachCharacterCounters(){var countFn=function(){var counter=(function(input){var cc=$j('.character_counter [id='+input.attr('id')+'_counter]');if(cc.length===1){return cc;}cc=input.nextAll('.character_counter').first().find('.value');if(cc.length){return cc;}var parent=input.parent();for(var i=0;i<2;i++){cc=parent.nextAll('.character_counter').find('.value');if(cc.length){return cc;}parent=parent.parent();}return $j();})($j(this)),max=parseInt(counter.attr('data-maxlength'),10),val=$j(this).val().replace(/\\r\\n/g,'\\n').replace(/\\r|\\n/g,'\\r\\n'),remaining=max-val.length;counter.html(remaining).attr(\"aria-valuenow\",remaining);};$j(document).on('keyup keydown mouseup mousedown change','.observe_textlength',countFn);$j('.observe_textlength').each(countFn);}jQuery.fn.preventDoubleSubmit=function(){jQuery(this).submit(function(){if(this.beenSubmitted)return false;else\nthis.beenSubmitted=true;});};function setupDropdown(){$j('#header').find('.dropdown').attr(\"aria-haspopup\",true);$j('#header').find('.dropdown, .dropdown .actions').children('a').attr({'class':'dropdown-toggle','data-toggle':'dropdown','data-target':'#'});$j('.dropdown').find('.menu').addClass(\"dropdown-menu\");$j('.dropdown').find('.menu').children('li').attr(\"role\",\"menu-item\");}function setupAccordion(){$j(\".expandable\").each(function(){var pane=$j(this);if(!pane.hasClass(\"hidden\")){pane.addClass(\"hidden\");};pane.prev().removeClass(\"hidden\").addClass(\"collapsed\").click(function(e){var expander=$j(this);if(expander.attr('href')=='#'){e.preventDefault();};expander.toggleClass(\"collapsed\").toggleClass(\"expanded\").next().toggleClass(\"hidden\");});});}function prepareDeleteLinks(){$j('a[href$=\"/confirm_delete\"]').each(function(){this.href=this.href.replace(/\\/confirm_delete$/,\"\");$j(this).attr(\"data-method\",\"delete\");if($j(this).is(\"[data-confirm]\")){return;}else{$j(this).attr(\"data-confirm\",\"Are you sure? This CANNOT BE UNDONE!\");};});$j('a[href$=\"/confirm_purge\"]').each(function(){this.href=this.href.replace(/\\/confirm_purge$/,\"/purge\");$j(this).attr(\"data-method\",\"post\");});}$j(document).ready(function(){$j('#kudos_summary').click(function(e){e.preventDefault();$j(this).hide();$j('.kudos_expanded').show();});$j('#kudos_collapser').click(function(e){e.preventDefault();$j('#kudos_summary').show();$j('.kudos_expanded').hide();});$j('#kudo_submit').on(\"click\",function(event){event.preventDefault();$j.ajax({type:'POST',url:'/kudos.js',data:jQuery('#new_kudo').serialize(),error:function(jqXHR,textStatus,errorThrown){var msg='Sorry, we were unable to save your kudos';var data=$j.parseJSON(jqXHR.responseText);if(data.errors&&(data.errors.pseud_id||data.errors.ip_address)){msg=\"You have already left kudos here. :)\";}if(data.errors&&data.errors.cannot_be_author){msg=\"You can't leave kudos on your own work.\";}if(data.errors&&data.errors.guest_on_restricted){msg=\"You can't leave guest kudos on a restricted work.\";}$j('#kudos_message').addClass('comment_error').text(msg);},success:function(data){$j('#kudos_message').addClass('notice').text('Thank you for leaving kudos!');}});});$j('#comments_placeholder').find('.pagination').find('a[data-remote]').livequery('click.rails',function(e){$j.scrollTo('#comments_placeholder');});$j(\"#show_comments_link_top\").find('a[href*=\"show_comments\"]').livequery('click.rails',function(e){$j.scrollTo('#feedback');});});$j(document).ready(function(){$j('.ajax-create-destroy').on(\"click\",function(event){event.preventDefault();var form=$j(this);var formAction=form.attr('action');var formSubmit=form.find('[type=\"submit\"]');var createValue=form.data('create-value');var destroyValue=form.data('destroy-value');var flashContainer=$j('.flash');$j.ajax({type:'POST',url:formAction,data:form.serialize(),dataType:'json',success:function(data){flashContainer.removeClass('error').empty();if(data.item_id){flashContainer.addClass('notice').html(data.item_success_message);formSubmit.val(destroyValue);form.append('<input name=\"_method\" type=\"hidden\" value=\"delete\">');form.attr('action',formAction+'/'+data.item_id);}else{flashContainer.addClass('notice').html(data.item_success_message);formSubmit.val(createValue);form.find('input[name=\"_method\"]').remove();form.attr('action',formAction.replace(/\\/\\d+/,''));}},error:function(xhr,textStatus,errorThrown){flashContainer.empty();flashContainer.addClass('error notice');try{jQuery.parseJSON(xhr.responseText);}catch(e){flashContainer.append(\"We're sorry! Something went wrong.\");return;}$j.each(jQuery.parseJSON(xhr.responseText).errors,function(index,error){flashContainer.append(error+\" \");});}});});});$j(document).ready(function(){$j('.ajax-remove').on(\"click\",function(event){event.preventDefault();var form=$j(this);var formAction=form.attr('action');if(form.closest('li.group').length!==0){formParent=form.closest('li.group');}else{formParent=form.closest('tr');};var parentContainer=formParent.closest('div:not(.admin)');var flashContainer=parentContainer.find('.flash');$j.ajax({type:'POST',url:formAction,data:form.serialize(),dataType:'json',success:function(data){flashContainer.removeClass('error').empty();flashContainer.addClass('notice').html(data.item_success_message);},error:function(xhr,textStatus,errorThrown){flashContainer.empty();flashContainer.addClass('error notice');try{jQuery.parseJSON(xhr.responseText);}catch(e){flashContainer.append(\"We're sorry! Something went wrong.\");return;}$j.each(jQuery.parseJSON(xhr.responseText).errors,function(index,error){flashContainer.append(error+\" \");});}});$j(document).ajaxSuccess(function(){formParent.slideUp(function(){$j(this).remove();});});});});function thermometer(){$j('.announcement').has('.goal').each(function(){var banner_content=$j(this).find('blockquote')\nbanner_goal_text=banner_content.find('span.goal').text()\nbanner_progress_text=banner_content.find('span.progress').text()\nif($j(this).find('span.goal').hasClass('stretch')){stretch=true}else{stretch=false}goal_amount=parseFloat(banner_goal_text.replace(/,/g,''))\nprogress_amount=parseFloat(banner_progress_text.replace(/,/g,''))\npercentage_amount=Math.min(Math.round(progress_amount/goal_amount*1000)/10,100);banner_content.append('<div class=\"thermometer-content\"><div class=\"thermometer\"><div class=\"track\"><div class=\"goal\"><span class=\"amount\">US$'+banner_goal_text+'</span></div><div class=\"progress\"><span class=\"amount\">US$'+banner_progress_text+'</span></div></div></div></div>');if(stretch==true){banner_content.find('div.track').css({'background':'#8eb92a','background-image':'linear-gradient(to bottom, #bfd255 0%, #8eb92a 50%, #72aa00 51%, #9ecb2d 100%)'});banner_content.find('div.progress').css({'width':percentage_amount+'%','background':'#4d7c10','background-image':'linear-gradient(to bottom, #6e992f 0%, #4d7c10 50%, #3b7000 51%, #5d8e13 100%)'});}else if(percentage_amount>=100){banner_content.find('div.progress').css({'width':'100%','background':'#8eb92a','background-image':'linear-gradient(to bottom, #bfd255 0%, #8eb92a 50%, #72aa00 51%, #9ecb2d 100%)'});}else if(percentage_amount>=85){banner_content.find('div.progress').css({'width':percentage_amount+'%','background':'#d2e638','background-image':'linear-gradient(to bottom, #e6f0a3 0%, #d2e638 50%, #c3d825 51%, #dbf043 100%)'});}else if(percentage_amount>=30){banner_content.find('div.progress').css({'width':percentage_amount+'%','background':'#fccd4d','background-image':'linear-gradient(to bottom, #fceabb 0%, #fccd4d 50%, #f8b500 51%, #fbdf93 100%)'});}else{banner_content.find('div.progress').css({'width':percentage_amount+'%','background':'#f17432','background-image':'linear-gradient(to bottom, #feccb1 0%, #f17432 50%, #ea5507 51%, #fb955e 100%)'});}});}function updateCachedTokens(){if($j('#small_login').length>0){$j.getJSON(\"/token_dispenser.json\",function(data){var token=data.token;$j('input[name=authenticity_token]').each(function(){$j(this).attr('value',token);});$j('meta[name=csrf-token]').attr('value',token);});}}";
var mod_pagespeed_5zo0ZWMy4O = "!function(e){\"use strict\";function r(){e(t).each(function(){i(e(this)).removeClass(\"open\")})}function i(t){var n=t.attr(\"data-target\"),r;if(!n){n=t.attr(\"href\");n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\\s]*$)/,\"\")}r=n&&e(n);if(!r||!r.length)r=t.parent();return r}var t=\"[data-toggle=dropdown]\",n=function(t){var n=e(t).on(\"click.dropdown.data-api\",this.toggle);e(\"html\").on(\"click.dropdown.data-api\",function(){n.parent().removeClass(\"open\")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(\".disabled, :disabled\"))return;s=i(n);o=s.hasClass(\"open\");r();if(o){s.children(\"ul\").hide();n.blur()}else{s.toggleClass(\"open\").children(\"ul\").removeAttr(\"style\");n.focus()}n.focus();return false},keydown:function(n){var r,s,o,u,a,f;if(!/(38|40|27)/.test(n.keyCode))return;r=e(this);n.preventDefault();n.stopPropagation();if(r.is(\".disabled, :disabled\"))return;u=i(r);a=u.hasClass(\"open\");if(!a||a&&n.keyCode==27){if(n.which==27)u.find(t).focus();return r.click()}s=e(\"[role=menu] li:not(.divider):visible a\",u);if(!s.length)return;f=s.index(s.filter(\":focus\"));if(n.keyCode==38&&f>0)f--;if(n.keyCode==40&&f<s.length-1)f++;if(!~f)f=0;s.eq(f).focus()}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data(\"dropdown\");if(!i)r.data(\"dropdown\",i=new n(this));if(typeof t==\"string\")i[t].call(r)})};e.fn.dropdown.Constructor=n;e.fn.dropdown.noConflict=function(){e.fn.dropdown=s;return this};e(document).on(\"click.dropdown.data-api\",r).on(\"click.dropdown.data-api\",\".dropdown form\",function(e){e.stopPropagation()}).on(\"click.dropdown-menu\",function(e){e.stopPropagation()}).on(\"click.dropdown.data-api\",t,n.prototype.toggle).on(\"keydown.dropdown.data-api\",t+\", [role=menu]\",n.prototype.keydown).on(\"mouseenter\",\".dropdown\",function(t){var n=e(this);if(n.siblings(\".open\").length){n.children(\"ul\").hide()}}).on(\"mouseleave\",\".dropdown\",function(t){e(this).children(\"ul\").removeAttr(\"\")})}(window.jQuery)";
var mod_pagespeed_eCCgOhjhYQ = "(function(d){d.fn.shuffle=function(c){c=[];return this.each(function(){c.push(d(this).clone(true))}).each(function(a,b){d(b).replaceWith(c[a=Math.floor(Math.random()*c.length)]);c.splice(a,1)})};d.shuffle=function(a){return d(a).shuffle()}})(jQuery);";
var mod_pagespeed_TU1Ln7LKSh = "!function(e){var t={hintText:\"Type in a search term\",noResultsText:\"No results\",searchingText:\"Searching...\",deleteText:\"&times;\",searchDelay:500,minChars:1,tokenLimit:null,jsonContainer:null,method:\"GET\",contentType:\"json\",queryParam:\"q\",tokenDelimiter:\",\",preventDuplicates:!1,prePopulate:null,processPrePopulate:!1,makeSortable:!1,escapeHTML:!0,animateDropdown:!0,onResult:null,onAdd:null,onDelete:null,noCache:!1},n={tokenList:\"autocomplete\",sortable:\"sortable\",token:\"added tag\",tokenDelete:\"delete\",selectedToken:\"selected\",highlightedToken:\"highlighted\",dropdown:\"autocomplete dropdown\",dropdownItem:\"even\",dropdownItem2:\"odd\",selectedDropdownItem:\"selected\",inputToken:\"input\",insertBefore:\"selected\",insertAfter:\"selected\"},a={BEFORE:0,AFTER:1,END:2},o={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,NUMPAD_ENTER:108,COMMA:188};e.fn.tokenInput=function(n,a){var o=e.extend({},t,a||{});return this.each(function(){new e.TokenList(this,n,o)})},e.TokenList=function(t,i,s){function l(t,n){if(n.indexOf(s.tokenDelimiter)>=0)return void e.each(n.split(s.tokenDelimiter),function(e,t){l(t,t)});var a=e(\"<li>\"+D(n)+\" </li>\").addClass(s.classes.token).insertBefore(U);s.makeSortable;var o=e(\"<span></span>\").addClass(s.classes.tokenDelete).appendTo(a).click(function(){return p(e(this).parent()),!1});e('<a href=\"#\">'+s.deleteText+\"</a>\").attr(\"title\",\"remove \"+n).appendTo(o);var i={id:t,name:n};e.data(a.get(0),\"tokeninput\",i),A=A.slice(0,B).concat([i]).concat(A.slice(B)),B++;var r=e.map(A,function(e){return e.id});return _.val(r.join(s.tokenDelimiter)),R+=1,a}function r(t){var n;n=\"string\"===e.type(t)?{id:t,name:t}:e.data(t.get(0),\"tokeninput\"),O.val(\"\");var a=s.onAdd;if(R>0&&s.preventDuplicates){var o=null;if(M.children().each(function(){var t=e(this),a=e.data(t.get(0),\"tokeninput\");return a&&a.id===n.id?(o=t,!1):void 0}),o)return u(o),void O.focus()}l(n.id,n.name),null!==s.tokenLimit&&R>=s.tokenLimit?(O.parent().prev(\"li\").find(\"a\").focus(),O.hide()):O.focus(),h(),e.isFunction(a)&&a.call(_,n),O.change()}function c(t){h();var n=e.data(t.get(0),\"tokeninput\");p(t),O.val(n.id)}function u(e){e.addClass(s.classes.selectedToken),j=e.get(0),O.val(\"\"),h()}function d(e,t){e.removeClass(s.classes.selectedToken),j=null,t===a.BEFORE?B--:t===a.AFTER?B++:B=R,O.focus()}function f(t){var n=j;if(j){if(j===t.get(0))return void c(t);d(e(j),a.END)}n===t.get(0)?d(t,a.END):u(t)}function p(t){var n=e.data(t.get(0),\"tokeninput\"),a=s.onDelete,o=t.prevAll().length;o>B&&o--,t.remove(),j=null,O.focus(),A=A.slice(0,o).concat(A.slice(o+1)),B>o&&B--;var i=e.map(A,function(e){return e.id});_.val(i.join(s.tokenDelimiter)),R-=1,null!==s.tokenLimit&&O.show().val(\"\").focus(),e.isFunction(a)&&a.call(_,n),O.change()}function h(){G.hide(),I&&e(I).removeClass(s.classes.selectedToken),I=null}function m(){G.css({position:\"absolute\"}).css(\"z-index\",999).show()}function v(){s.searchingText&&(G.html(\"<p class='notice'>\"+s.searchingText+\"</p>\"),m())}function k(){s.hintText&&(G.html(\"<p class='notice'>\"+s.hintText+\"</p>\"),m())}function T(t,n){var a=t;return e.each(n.split(\" \"),function(e,t){t&&(t=t.replace(/([.?*+^$[\\]\\\\(){}-])/g,\"\\\\$1\"),a=a.replace(new RegExp(\"(?![^&;]+;)(?!<[^<>]*)(\"+t+\")(?![^<>]*>)(?![^&;]+;)\",\"gi\"),\"<b>$1</b>\"))}),a}function g(t,n){if(n&&n.length){G.empty();var a=e('<ul role=\"listbox\" aria-activedescendant=\"ui-active-menuitem\">').appendTo(G).mouseover(function(t){C(e(t.target).closest(\"li\"))}).mousedown(function(t){return r(e(t.target).closest(\"li\")),!1}).hide();e.each(n,function(n,o){var i=e('<li role=\"option\">'+T(D(o.name),t)+\"</li>\").appendTo(a);n%2?i.addClass(s.classes.dropdownItem):i.addClass(s.classes.dropdownItem2),0===n&&(S=i),e.data(i.get(0),\"tokeninput\",{id:o.id,name:o.name})}),m(),s.animateDropdown?a.slideDown(\"fast\"):a.show()}else s.noResultsText&&(G.html(\"<p class='notice'>\"+s.noResultsText+\"</p>\"),m())}function C(t){t&&(I&&E(e(I)),t.addClass(s.classes.selectedDropdownItem),I=t.get(0))}function E(e){e.removeClass(s.classes.selectedDropdownItem),I=null}function D(t){return s.escapeHTML?e(\"<p></p>\").text(t).html():t}function x(){var t=O.val().toLowerCase();(t&&t.length||0==s.minChars)&&(I&&E(e(I)),j&&d(e(j),a.AFTER),0==s.minChars||t.length>=s.minChars?(v(),clearTimeout(P),P=setTimeout(function(){y(t)},s.searchDelay)):h())}function y(e){if(!s.noCache)var t=b.get(e);!s.noCache&&t?g(e,t):L(e)}function L(t){if(s.url)w(t);else if(s.local_data){var n=e.grep(s.local_data,function(e){return e.name.toLowerCase().indexOf(t.toLowerCase())>-1});e.isFunction(s.onResult)&&(n=s.onResult.call(_,n)),b.add(t,n),g(t,n)}}function w(t){var n={};if(n.data={},s.url.indexOf(\"?\")>-1){var a=s.url.split(\"?\");n.url=a[0];var o=a[1].split(\"&\");e.each(o,function(e,t){var a=t.split(\"=\");n.data[a[0]]=a[1]})}else n.url=s.url;if(s.liveParams){var i=s.liveParams.split(\"&\");e.each(i,function(t,a){var o=a.split(\"=\"),i=\"#\"+o[1]+\" input\";0===e(i).size()?i=\"#\"+o[1]:i+=\":checked\";var s=e(i).map(function(t,n){return e(n).val()}).get();s&&(n.data[o[0]]=s)})}n.data[s.queryParam]=t,n.type=s.method,n.dataType=s.contentType,s.crossDomain&&(n.dataType=\"jsonp\"),n.success=function(n){e.isFunction(s.onResult)&&(n=s.onResult.call(_,n)),s.noCache||b.add(t,s.jsonContainer?n[s.jsonContainer]:n),O.val().toLowerCase()===t&&O.is(\":focus\")&&g(t,s.jsonContainer?n[s.jsonContainer]:n)},e.ajax(n)}\"string\"==typeof i?(s.url=i,void 0===s.crossDomain&&(-1===s.url.indexOf(\"://\")?s.crossDomain=!1:s.crossDomain=location.href.split(/\\/+/g)[1]!==s.url.split(/\\/+/g)[1])):\"object\"==typeof i&&(s.local_data=i),s.classes?s.classes=e.extend({},n,s.classes):s.theme?(s.classes={},e.each(n,function(e,t){s.classes[e]=t+\"-\"+s.theme})):s.classes=n;var P,A=[],R=0,b=new e.TokenList.Cache,F=e(t).attr(\"id\"),N=e('label[for=\"'+F+'\"]');N.attr({\"for\":F+\"_autocomplete\"});var O=e('<input type=\"text\" class=\"text\" autocomplete=\"off\" role=\"combobox\" aria-expanded=\"true\" aria-autocomplete=\"list\">').attr({id:F+\"_autocomplete\"}).focus(function(){(null===s.tokenLimit||R<s.tokenLimit)&&(e(this).val().length>=s.minChars?setTimeout(function(){x()},5):k())}).blur(function(){h()}).keydown(function(t){var n,i;switch(t.keyCode){case o.LEFT:case o.RIGHT:case o.UP:case o.DOWN:if(S&&!S.is(\":hidden\")){if(t.keyCode===o.LEFT||t.keyCode===o.RIGHT)return!0;var l=null;return l=I?t.keyCode===o.DOWN?e(I).next():e(I).prev():S,l.length?(C(l),e(G).scrollTo(e(l))):t.keyCode===o.UP&&I&&E(e(I)),!1}j?(n=e(j).prev(),i=e(j).next(),t.keyCode===o.LEFT||t.keyCode===o.UP?d(e(j),a.BEFORE):d(e(j),a.AFTER)):(n=U.prev(),i=U.next()),t.keyCode!==o.LEFT&&t.keyCode!==o.UP||!n.length?t.keyCode!==o.RIGHT&&t.keyCode!==o.DOWN||!i.length||u(e(i.get(0))):u(e(n.get(0)));break;case o.BACKSPACE:case o.DELETE:if(n=U.prev(),!e(this).val().length)return j?p(e(j)):n.length&&u(e(n.get(0))),!1;1===e(this).val().length?h():setTimeout(function(){x()},5);break;case o.COMMA:case o.TAB:case o.ENTER:case o.NUMPAD_ENTER:if(I){if(r(e(I)),E(e(I)),h(),t.keyCode===o.TAB&&s.tokenLimit&&s.tokenLimit===R)break;return!1}if(O.val()){if(e.each(O.val().split(s.tokenDelimiter),function(t,n){r(e.trim(n))}),h(),t.keyCode===o.TAB&&s.tokenLimit&&s.tokenLimit===R)break;return!1}break;case o.ESCAPE:return h(),!0;default:String.fromCharCode(t.which)&&setTimeout(function(){x()},5)}});e(t).closest(\"form\").submit(function(){O.val()&&e.each(O.val().split(s.tokenDelimiter),function(t,n){r(e.trim(n))})});var _=e(t).hide().focus(function(){O.focus()}).blur(function(){O.blur()}),j=null,B=0,I=null,S=null,M=e(\"<ul />\").addClass(s.classes.tokenList).click(function(t){var n=e(t.target).closest(\"li\");n&&n.get(0)&&e.data(n.get(0),\"tokeninput\")?f(n):(j&&d(e(j),a.END),O.focus())}).mouseover(function(t){var n=e(t.target).closest(\"li\");n&&j!==this&&n.addClass(s.classes.highlightedToken)}).mouseout(function(t){var n=e(t.target).closest(\"li\");n&&j!==this&&n.removeClass(s.classes.highlightedToken)}).insertBefore(_);s.makeSortable&&M.addClass(s.classes.sortable);var U=e(\"<li />\").addClass(s.classes.inputToken).appendTo(M).append(O),G=e(\"<div>\").addClass(s.classes.dropdown).insertAfter(O).hide(),H=e(t).val()||s.prePopulate;if(s.processPrePopulate&&e.isFunction(s.onResult)&&(H=s.onResult.call(_,H)),e(t).val(\"\"),_.val(\"\"),O.val(\"\"),H&&H.length&&(\"string\"==typeof H?l(H,H):e.each(H,function(e,t){l(t.id,t.name)})),null!==s.tokenLimit&&R>=s.tokenLimit&&O.hide(),s.liveParams){var z=s.liveParams.split(\"&\");e.each(z,function(t,n){var a=n.split(\"=\"),o=\"#\"+a[1]+\" input\";0===e(o).size()&&(o=\"#\"+a[1]),e(o).each(function(t,n){e(n).hasClass(\"autocomplete\")&&(n=e(n).prev().find(\"input\").first()),e(n).change(function(e){b.clear_data()})})})}},e.TokenList.Cache=function(t){var n=e.extend({max_size:500},t),a={},o=0,i=function(){a={},o=0};this.clear_data=function(){i()},this.add=function(e,t){o>n.max_size&&i(),a[e]||(o+=1),a[e]=t},this.get=function(e){return a[e]}}}(jQuery);";
var mod_pagespeed_qTpbjsXQwh = "(function(e,t){function r(e){if(e.keyCode===9){var t=!!e.shiftKey;if(i(this,e.target,t)){e.preventDefault();e.stopPropagation()}}}function i(e,t,n){var r=a(e),i=t,s,o,u,f;do{s=r.index(i);o=s+1;u=s-1;f=r.length-1;switch(s){case-1:return false;case 0:u=f;break;case f:o=0;break}if(n){o=u}i=r.get(o);if(!i||i===t){return true}try{i.focus()}catch(l){return true}}while(r.length>1&&t===t.ownerDocument.activeElement);return true}function s(){return this.tabIndex>0}function o(){return!this.tabIndex}function u(e,t){return e.t-t.t||e.i-t.i}function a(t){var n=e(t);var r=[],i=0;h.enable&&h.enable();n.find(\"a[href], link[href], [draggable=true], [contenteditable=true], :input:enabled, [tabindex=0]\").filter(\":visible\").filter(o).each(function(e,t){r.push({v:t,t:0,i:i++})});n.find(\"[tabindex]\").filter(\":visible\").filter(s).each(function(e,t){r.push({v:t,t:t.tabIndex,i:i++})});h.disable&&h.disable();r=e.map(r.sort(u),function(e){return e.v});return e(r)}function f(){this.keydown(r);this.data(n,true);return this}function l(){this.unbind(\"keydown\",r);this.removeData(n);return this}function c(){return!!this.data(n)}var n=\"trap.isTrapping\";e.fn.extend({trap:f,untrap:l,isTrapping:c});var h={};if(e.find.find&&e.find.attr!==e.attr){(function(){function i(e){var r=e.getAttributeNode(n);return r&&r.specified?parseInt(r.value,10):t}function s(){r[n]=r.tabIndex=i}function o(){delete r[n];delete r.tabIndex}var n=\"tabindex\";var r=e.expr.attrHandle;h={enable:s,disable:o}})()}})(jQuery);";
var mod_pagespeed_R5FGw2ySDb = "jQuery(document).ready(function(){window.ao3modal=function(e){function d(t){if(l){return}e(\"body\").css({\"margin-right\":t?\"\":h,overflow:t?\"\":\"hidden\",height:t?\"\":n.height()})}function v(){var t,r,u,a=!s.is(\":visible\");if(l&&c<0){c=e(window).scrollTop()}if(a){s.css(\"opacity\",0).show()}s.removeClass(\"tall\");if(s.hasClass(\"img\")){t=o.children(\"img\").first();s.toggleClass(\"tall\",s.height()>=.95*n.height())}else if(!l){r=n.height()*f.scale;u=Math.min(r,f.max);s.toggleClass(\"tall\",!u||s[0].scrollHeight>u)}if(a){s.hide().css(\"opacity\",\"\")}i.css(\"top\",e(window).scrollTop())}function m(n,i){t=false;o.empty();if(n instanceof e){o.append(n)}else{o.html(n)}i=i instanceof e?i:e(\"<span>\").addClass(\"title\").text(i||\"\");a.replaceWith(i);a=i;if(!o.is(\":empty\")){v();if(!o.is(\":visible\")){p.toggleHandlers(true);r.hide();s.fadeIn(function(){o.focus()})}}}function g(o,u){s.hide();i.show();if(e.support.opacity){n.add(r).fadeIn()}else{n.add(r).show()}d(false);t=true;if(o.indexOf(\"#\")===0){m(e(o).html(),u||\"\")}else if(o.indexOf(\".jpg\")==o.length-\".jpg\".length||o.indexOf(\".gif\")==o.length-\".gif\".length||o.indexOf(\".bmp\")==o.length-\".bmp\".length||o.indexOf(\".png\")==o.length-\".png\".length){s.addClass(\"img\");var a=e(\"<img>\").appendTo(e(\"body\")).attr(\"src\",o),f=function(){var n=e(\"<a>\").addClass(\"title\").attr({href:o,title:\"View original\",target:\"_blank\"}).text(u||(o.indexOf(\"/\")!=-1?o.substring(o.lastIndexOf(\"/\")+1):o)).css(\"text-decoration\",\"underline\");a.remove();if(!t){return}if(u){a.attr(\"alt\",u)}m(a[0],n)};if(a[0].complete){f()}else{a.load(f)}}else{e.ajax({url:o,success:function(e){if(!t){return}m(e,u)}})}}function y(){t=false;a.text(\"\");p.toggleHandlers(false);i.fadeOut(function(){m(\"\");d(true);s.css(\"width\",\"\").removeClass(\"tall img\");if(l&&c>=0){e(\"html, body\").animate({scrollTop:c},\"fast\");c=-1}});if(e.support.opacity){n.fadeOut()}else{n.hide()}}function b(t){t.each(function(){var t=e(this).is(\"img\")?e(this).removeClass(\"modal\"):false,n=!t?e(this):e(\"<a>\").css(\"border\",\"none\").attr({title:t.attr(\"title\")||t.attr(\"alt\"),href:t.attr(\"src\")}).replaceAll(t).append(t);n.addClass(\"modal modal-attached\").attr(\"aria-controls\",\"#modal\").click(function(t){g(e(this).attr(\"href\"),e(this).attr(\"title\"));t.preventDefault()});if(n.attr(\"href\").indexOf(\"#\")===0){e(n.attr(\"href\")).hide()}})}var t=false,n=e(\"<div>\",{id:\"modal-bg\"}).addClass(\"modal-closer\"),r=e(\"<div>\").addClass(\"loading\"),i=e(\"<div>\",{id:\"modal-wrap\"}).addClass(\"modal-closer\"),s=e(\"<div>\",{id:\"modal\"}),o=e(\"<div>\").addClass(\"content userstuff\"),u=e(\"<a>\").addClass(\"action modal-closer\").click(function(e){e.preventDefault()}).attr(\"href\",\"#\").text(\"Close\"),a=e(\"<span>\").addClass(\"title\"),f,l=function(e){return/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),c=-1,h=l?0:function(){var t=e(\"<p>\").css({width:\"100%\",height:200}),n=e(\"<div>\").css({height:150,left:0,overflow:\"hidden\",top:0,visibility:\"hidden\",width:200}).append(t).appendTo(e(\"body\")),r=t[0].offsetWidth,i;n.css(\"overflow\",\"scroll\");i=t[0].offsetWidth;if(r==i)i=n[0].clientWidth;n.remove();return r-i}(),p;e(\"body\").append(n.append(r),i.append(s.append(o,e(\"<div>\").addClass(\"footer\").append(a,u)).trap()));f=l?null:function(){var e={},t=s.clone();t.css(\"margin-top\",9001).addClass(\"tall\").appendTo(n);e.scale=!t.height()?.8:parseInt(t.css(\"height\"))/100;e.max=parseInt(t.css(\"max-height\"));t.remove();return e}();e(\"body\").click(function(t){if(e(t.target).hasClass(\"modal-closer\")||s.hasClass(\"img\")&&e(t.target).hasClass(\"content\")){y()}});e(window).resize(function(){if(s.is(\":visible\")){v()}});p=function(){var t={38:-20,40:20,33:-200,34:200},n=false,r={keydown:function(n){if(t[n.which]){o[0].scrollTop+=t[n.which];n.preventDefault()}else if(s.is(\":visible\")){var r=n.target,i=r.tagName.toLowerCase(),u=n.which==27,a=n.which==13,f=/^(input|textarea|a|button)$/.test(i),l=!!e(r).closest(\"#modal\")[0];if(u||a&&(!l||!f)){y()}if(u||!l||a&&!f){n.preventDefault();n.stopPropagation()}}},keypress:function(e){if(t[e.which]){e.preventDefault()}},keyup:function(e){if(t[e.which]){e.preventDefault()}else if(e.which==9&&!n){u.focus();n=true;e.preventDefault()}}};return{toggleHandlers:function(t){n=false;for(var i in r){if(r.hasOwnProperty(i)){if(t){e(\"body\").on(i,r[i])}else{e(\"body\").off(i,r[i])}}}}}}();b(e(\"a.modal, img.modal\"));e(\"body\").on(\"click\",\"a.modal, img.modal\",function(t){var n=e(this);if(n.is(\".modal-attached\")){return}b(n);t.preventDefault();if(n.is(\"img\")){n.parent().click()}else{n.click()}});return{show:g,setContent:m,hide:y,addLink:b}}(jQuery)})";
var mod_pagespeed_KmWy4miNOM = "(function($){$.cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||value===null||value===undefined)){options=$.extend({},options);if(value===null||value===undefined){options.expires=-1;}if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}value=String(value);return(document.cookie=[encodeURIComponent(key),'=',options.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}options=value||{};var decode=options.raw?function(s){return s;}:decodeURIComponent;var pairs=document.cookie.split('; ');for(var i=0,pair;pair=pairs[i]&&pairs[i].split('=');i++){if(decode(pair[0])===key)return decode(pair[1]||'');}return null;};})(jQuery);";
var mod_pagespeed_Gf_4KFhTvB = "function setupFilterToggles(){var e=$j(\".filters\").find(\"dt.filter-toggle\");e.each(function(){var e=$j(this).next().attr(\"id\");$j(this).wrapInner('<button type=\"button\" class=\"expander\" aria-expanded=\"false\" aria-controls=\"'+e+'\"></button>')}),$j(\"dt.tags button\").on(\"click\",function(){\"false\"==$j(this).attr(\"aria-expanded\")?$j(this).attr(\"aria-expanded\",\"true\"):$j(this).attr(\"aria-expanded\",\"false\")})}function showFilters(){var e=$j(\".filters\").find(\"dd.expandable\");e.each(function(e,t){var a=$j(t).find(\"input\").filter('[value]:not([value=\"\"])'),r=$j(t).attr(\"id\"),n=$j(\"#toggle_\"+r),i=$j('[aria-controls=\"'+r+'\"]');a.each(function(e,a){$j(a).is(':checked, [type=\"text\"]')&&($j(t).removeClass(\"hidden\"),$j(n).removeClass(\"collapsed\").addClass(\"expanded\"),$j(i).attr(\"aria-expanded\",\"true\"))})})}function setupNarrowScreenFilters(){var e=$j(\"form.filters\"),t=$j(\"#outer\"),a=$j(\"#go_to_filters\"),r=$j(\"#leave_filters\");a.click(function(a){a.preventDefault(),e.removeClass(\"narrow-hidden\"),t.addClass(\"filtering\"),e.find(\":focusable\").first().focus(),e.trap()}),r.click(function(r){r.preventDefault(),t.removeClass(\"filtering\"),e.addClass(\"narrow-hidden\"),a.focus()})}$j(document).ready(function(){setupFilterToggles(),showFilters(),setupNarrowScreenFilters()});";
